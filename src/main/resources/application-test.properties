# Configurações específicas para o perfil de teste

# DATASOURCE / Configurações do banco de dados H2
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.url=jdbc:h2:mem:testdb  # URL do banco em memória
spring.datasource.username=sa   # Usuário
spring.datasource.password= # Senha

# H2 CLIENT
# Habilita console web
spring.h2.console.enabled=true             
spring.h2.console.path=/h2-console            # Caminho para acessar o console


# JPA, SQL
# Define o dialeto do banco de dados para o Hibernate (específico para H2)
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Define a estratégia de geração/atualização do banco de dados
# create-drop: cria o banco ao iniciar e apaga ao encerrar
spring.jpa.hibernate.ddl-auto=create-drop

# Permite inicialização do banco após a criação das tabelas
spring.jpa.defer-datasource-initialization=true

# Exibe as consultas SQL no console/log
spring.jpa.show-sql=true

# Formata o SQL exibido para melhor legibilidade
spring.jpa.properties.hibernate.format_sql=true

# Mantém a sessão do JPA aberta durante todo o ciclo de requisição
spring.jpa.open-in-view=true

# SERVER
# Inclui mensagens de erro na resposta HTTP
server.error.include-message=always

# Não inclui stack trace nas respostas de erro
# Recomendado por segurança
server.error.include-stacktrace=never

# Define a estratégia de correspondência de padrões para URLs
# ant_path_matcher é mais flexível para matching de URLs
spring.mvc.pathmatch.matching-strategy=ant_path_matcher